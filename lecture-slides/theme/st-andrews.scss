/*-- scss:defaults --*/

// ============================================================================
// SOLARIZED PALETTE
// ============================================================================
$solarized-base03: #002b36;
$solarized-base02: #073642;
$solarized-base01: #586e75;
$solarized-base00: #657b83;
$solarized-base0: #839496;
$solarized-base1: #93a1a1;
$solarized-base2: #eee8d5;
$solarized-base3: #fdf6e3;

// ============================================================================
// ST ANDREWS BRAND COLORS
// ============================================================================
$sta-blue: #00539b;
$sta-red: #ee312a;
$sta-yellow: #ffdf00;

// ============================================================================
// THEME VARIABLES (Reveal.js specific)
// ============================================================================

// Background and text
$backgroundColor: $solarized-base3;
$mainColor: $solarized-base02;

// Headings
$headingColor: $solarized-base02;
$headingTextTransform: none;
$headingFontWeight: 600;
$headingLineHeight: 1.2;

// Links
$linkColor: $sta-blue;
$linkColorHover: darken($sta-blue, 10%);

// Typography - serif stack
$mainFont: 'Palatino Linotype', 'Book Antiqua', Palatino, 'Hoefler Text', Garamond, 'Times New Roman', serif;
$headingFont: 'Palatino Linotype', 'Book Antiqua', Palatino, 'Hoefler Text', Garamond, 'Times New Roman', serif;
$mainFontSize: 36px;
$headingLetterSpacing: -0.01em;

// Code
$codeFont: Monaco, Menlo, Consolas, 'Courier New', monospace;

// Block spacing
$blockMargin: 16px;

// Selection
$selectionBackgroundColor: rgba(0, 83, 155, 0.25);
$selectionColor: $mainColor;

/*-- scss:rules --*/

// ============================================================================
// GLOBAL SLIDE LAYOUT
// ============================================================================
.reveal .slides {
    text-align: left;
}

.reveal section {
    padding: 28px 42px;
}

// ============================================================================
// HEADINGS
// ============================================================================
.reveal h1 {
    font-size: 2.2em;
    margin-bottom: 24px;
    font-weight: 700;
}

.reveal h2 {
    font-size: 1.6em;
    border-bottom: 2px solid $solarized-base1;
    padding-bottom: 12px;
    margin-bottom: 20px;
}

.reveal h3 {
    font-size: 1.3em;
    color: $solarized-base01;
    margin-bottom: 16px;
}

// ============================================================================
// TITLE SLIDE (St Andrews branding)
// ============================================================================

// Target the actual slide background
.reveal .slide-background.title-slide {
    background: linear-gradient(135deg, $sta-blue 0%, darken($sta-blue, 8%) 100%) !important;
}

// Alternative: if using data attribute
.reveal .slides section.title-slide {
    background: linear-gradient(135deg, $sta-blue 0%, darken($sta-blue, 8%) 100%);
}

// Title slide content styling
.reveal section.title-slide,
.reveal .slides section:first-child {
    color: white !important;

    h1,
    h1.title {
        color: white !important;
        font-size: 2.8em;
        font-weight: 700;
        border: none;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        margin-bottom: 16px;
        padding-bottom: 0;
    }

    h2,
    h2.subtitle,
    .subtitle {
        color: rgba(255, 255, 255, 0.9) !important;
        font-weight: 400;
        border: none;
        padding-bottom: 0;
    }

    p,
    p.author,
    p.date,
    .quarto-title-meta,
    .quarto-title-meta-contents {
        color: rgba(255, 255, 255, 0.85) !important;
        font-size: 0.9em;
    }
}

// ============================================================================
// SECTION DIVIDERS
// ============================================================================
.reveal section[data-background-color="#00539b"],
.reveal section[data-background-color="#{$sta-blue}"] {
    color: white;

    h1,
    h2,
    h3 {
        color: white;
        border: none;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    strong {
        color: white;
    }
}

// ============================================================================
// LISTS
// ============================================================================
.reveal ul {
    list-style: disc;
    list-style-position: outside;
    padding-left: 1.2em;

    >li {
        margin: 10px 0;
        line-height: 1.4;
        padding-left: 0;
    }
}

.reveal ol {
    list-style-position: outside;
    padding-left: 1.4em;

    >li {
        margin: 10px 0;
        line-height: 1.4;
        padding-left: 0;
    }
}

// Nested lists
.reveal ul ul {
    list-style: circle;
    margin-top: 8px;
    margin-bottom: 6px;
    padding-left: 1.2em;
}

.reveal ul ul ul {
    list-style: square;
}

// Disable any custom bullets
.reveal ul > li::before,
.reveal li > ul > li::before {
    content: none !important;
}

// Fix lists inside callouts or after paragraphs
.reveal .callout ul,
.reveal p + ul,
.reveal div + ul {
    margin-left: 0;  // Reset any inherited margin
    padding-left: 0; // Reset any inherited padding
}

// ============================================================================
// EMPHASIS
// ============================================================================
.reveal strong,
.reveal b {
    color: $sta-blue;
    font-weight: 700;
}

.reveal em,
.reveal i {
    font-style: italic;
    color: $solarized-base01;
}

// ============================================================================
// LINKS
// ============================================================================
.reveal a {
    line-height: 1.3em;
    transition: color 0.2s ease;

    &:hover {
        text-decoration: underline;
    }
}

// ============================================================================
// TABLES
// ============================================================================
.reveal table {
    border-collapse: collapse;
    width: 100%;
    font-size: 0.82em;
    margin: 16px auto;
    background: rgba(253, 246, 227, 0.5);
    border-radius: 8px;
    overflow: hidden;

    th {
        text-align: left;
        background: $solarized-base2;
        color: $solarized-base02;
        font-weight: 600;
        border-bottom: 2px solid $sta-blue;
        padding: 12px 14px;
    }

    td {
        border-bottom: 1px solid $solarized-base1;
        padding: 10px 14px;
    }

    tr:last-child td {
        border-bottom: none;
    }

    tr:hover {
        background: rgba(0, 83, 155, 0.05);
    }
}

// ============================================================================
// CODE BLOCKS
// ============================================================================
.reveal pre {
    background: $solarized-base2;
    border: 1px solid $solarized-base1;
    border-radius: 8px;
    padding: 16px 18px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    margin: 16px 0;
    width: 100%;

    code {
        background: transparent;
        padding: 0;
        color: $solarized-base02;
        max-height: none;
    }
}

.reveal code {
    font-family: $codeFont;
    color: $solarized-base01;
    background: rgba(0, 43, 54, 0.05);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
}

.reveal p code,
.reveal li code {
    background: rgba(0, 43, 54, 0.08);
    padding: 2px 6px;
    border-radius: 3px;
}

// ============================================================================
// BLOCKQUOTES
// ============================================================================
.reveal blockquote {
    background: rgba(253, 246, 227, 0.5);
    border-left: 5px solid $sta-blue;
    padding: 16px 20px;
    margin: 20px 0;
    font-style: italic;
    color: $solarized-base01;
    border-radius: 4px;
    box-shadow: none;
    width: 90%;
}

// ============================================================================
// CALLOUTS (Quarto)
// ============================================================================
.reveal div.callout {
    border-radius: 10px;
    border: 1px solid $solarized-base1;
    background: rgba(253, 246, 227, 0.6);
    padding: 14px 18px;
    margin: 18px 0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);

    &.callout-note {
        border-left: 5px solid $sta-blue;

        .callout-title {
            color: $sta-blue;
        }
    }

    &.callout-important {
        border-left: 5px solid $sta-red;

        .callout-title {
            color: $sta-red;
        }
    }

    &.callout-warning {
        border-left: 5px solid #cb4b16;

        .callout-title {
            color: #cb4b16;
        }
    }

    &.callout-tip {
        border-left: 5px solid #859900;

        .callout-title {
            color: #859900;
        }
    }

    .callout-title {
        font-weight: 600;
        margin-bottom: 8px;
    }
}

// ============================================================================
// IMAGES
// ============================================================================
.reveal img,
.reveal figure img {
    border: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border-radius: 6px;
    max-width: 100%;
    height: auto;
}

.reveal figure {
    margin: 20px 0;
}

.reveal figcaption {
    font-size: 0.75em;
    color: $solarized-base01;
    font-style: italic;
    margin-top: 8px;
    text-align: center;
}

// ============================================================================
// SLIDE NUMBERS
// ============================================================================
.reveal .slide-number {
    background: transparent;
    color: $solarized-base1;
    font-size: 13px;
    font-family: $mainFont;
    opacity: 0.7;
}

// ============================================================================
// PROGRESS BAR
// ============================================================================
.reveal .progress {
    background: rgba(0, 0, 0, 0.1);
    height: 3px;

    span {
        background: $sta-blue;
        transition: width 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985);
    }
}

// ============================================================================
// CONTROLS
// ============================================================================
.reveal .controls {
    color: $sta-blue;
}

// ============================================================================
// FRAGMENTS
// ============================================================================
.reveal .fragment {
    transition: all 0.3s ease;
}

// ============================================================================
// FOOTER
// ============================================================================
.reveal .footer {
    font-size: 0.65em;
    color: $solarized-base1;
}

// ============================================================================
// MATH
// ============================================================================
.reveal .MathJax,
.reveal .katex {
    color: $solarized-base02;
}

// ============================================================================
// ACCESSIBILITY
// ============================================================================
.reveal :focus {
    outline: 2px solid $sta-blue;
    outline-offset: 2px;
}

// ============================================================================
// PRINT STYLES
// ============================================================================
@media print {
    .reveal section {
        background: white !important;
        color: black !important;
    }

    .reveal h1,
    .reveal h2,
    .reveal h3 {
        color: black !important;
    }

    .reveal a {
        color: black !important;
    }
}